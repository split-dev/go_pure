<div class="swiper-wrapper">
  {%- for block in section.blocks -%}

    {% assign rating = block.settings.rating %}

    <div class="swiper-slide swiper-lazy bg-center"
         data-background="{{ block.settings.image | img_url: 'master' }}">

      <div class="swiper-lazy-preloader"></div>

      <div class="quotes__single-quote">
        <div class="container">

          {%- if rating != 0 -%}
          <div class="quotes__single-quote__rating">
            {%- for star in (1..rating)-%}
              <span class="d-inline-block mr-1">{% render 'icon-star' %}</span>
            {%- endfor -%}
          </div>
          {%- endif -%}
          <cite class="d-block mb-3 font-weight-bold text-15px text-uppercase text-light">
            {{- block.settings.title -}}
          </cite>
          <q class="d-block text-24px text-light">{{- block.settings.content -}}</q>

          <button class="swiper-button-prev"><</button>
          <button class="swiper-button-next">></button>
        </div>
      </div>
    </div>
  {%- endfor -%}
</div>

<script type="module">
    import Swiper from 'https://unpkg.com/swiper/swiper-bundle.esm.browser.min.js';


    const swiper = new Swiper('.swiper-container', {
        slidesPerView: 1,
        effect: 'fade',
        fadeEffect: {
            crossFade: true
        },
        preloadImages: false,
        lazy: true,
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
    })
</script>

{% schema %}
{
  "name": "Quotes",
  "tag": "section",
  "class": "quotes swiper-container",
  "blocks": [
    {
      "name": "Single Quote",
      "type": "quote",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "range",
          "id": "rating",
          "min": 0,
          "max": 5,
          "step": 1,
          "default": 5,
          "label": "Rating"
        },
        {
          "type": "text",
          "id": "content",
          "label": "Review"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Author"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Quotes",
      "category": "New"
    }
  ]
}
{% endschema %}